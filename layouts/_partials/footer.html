{{- $footerConfig := .Site.Params.footer -}}

{{- if ne $footerConfig.enable false -}}
  <footer class="footer">
    <div class="footer-container">
      {{- /*  Custom Footer */ -}}
      {{- block "custom-footer" . }}{{ end -}}

      <div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork">
        {{ dict "Class" "fa-regular fa-copyright fa-fw" | partial "plugin/icon.html" }}
        <span itemprop="copyrightYear">{{ now.Year }}</span>
        <span class="author" itemprop="copyrightHolder">Matthieu Queloz</span>
      </div>

      {{- $siteTime := .Site.Store.Get "siteTime" -}}
      {{- if $siteTime.enable -}}
        <div class="footer-line statistics{{ with $footerConfig.order.statistics }} order-{{ . }}{{ end }}">
          {{- if $siteTime.enable | and $siteTime.value -}}
            {{- with $siteTime -}}
              <span class="site-time" title='{{ T "footer.siteRunning" }}'>
                {{- $siteTimeIcon := printf (cond .Animate "%v fa-fw animate-icon" "%v fa-fw") .Icon -}}
                {{- dict "Class" $siteTimeIcon | partial "plugin/icon.html" -}}
                {{- with .Pre -}}<span class="ms-1 d-none">{{ . }}</span>{{- end -}}
                {{- printf `<span class="run-times ms-1">%v</span>` (T "footer.siteRunning") | safeHTML -}}
              </span>
            {{- end -}}
          {{- end -}}
        </div>
      {{- end -}}

      {{- /* 不蒜子 */ -}}
      {{- $busuanzi := .Site.Params.busuanzi -}}
      {{- if eq $busuanzi.enable true -}}
        {{- $loading := dict "Class" "fa-solid fa-spinner fa-spin fa-fw" | partial "plugin/icon.html" -}}
        {{- $iconUV := dict "Class" "fa-regular fa-user fa-fw me-1" | partial "plugin/icon.html" -}}
        {{- $iconPV := dict "Class" "fa-regular fa-eye fa-fw me-1" | partial "plugin/icon.html" -}}
        <div class="footer-line visitor{{ with $footerConfig.order.visitor }} order-{{ . }}{{ end }}{{ if not $busuanzi.siteViews }} d-none{{ end }}">
          <span id="busuanzi_container_site_uv" title='{{ T "footer.siteUV" }}'>
            {{- $iconUV }}<span id="busuanzi_value_site_uv">{{ $loading }}</span>
            {{- /* NO_SPACING */ -}}
          </span>
          {{- /* NO_SPACING */ -}}
          <span id="busuanzi_container_site_pv" class="footer-divider" title='{{ T "footer.sitePV" }}'>
            {{- $iconPV }}<span id="busuanzi_value_site_pv">{{ $loading }}</span>
            {{- /* NO_SPACING */ -}}
          </span>
        </div>
      {{- end -}}
      
      {{- if $footerConfig.gov | or $footerConfig.icp -}}
        <div class="footer-line beian{{ with $footerConfig.order.beian }} order-{{ . }}{{ end }}">
          {{- /* GOV */ -}}
          {{- with $footerConfig.gov -}}
            <span class="gov">{{ . | safeHTML }}</span>
          {{- end -}}

          {{- /* ICP */ -}}
          {{- with $footerConfig.icp -}}
            <span class="icp footer-divider">{{ . | safeHTML }}</span>
          {{- end -}}
        </div>
      {{- end -}}
    </div>
  </footer>
{{- end -}}
